---
/**
 * Home Page
 * 
 * Main landing page with hero, timeline, projects, and achievements.
 */
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.svelte';
import JobTimeline from '../components/JobTimeline.svelte';
import GameCard from '../components/GameCard.svelte';
import AchievementCard from '../components/AchievementCard.svelte';
import { getCollection } from 'astro:content';
import { sortByDateDesc } from '../utils/dates';

// Load site content from JSON files
import heroData from '../content/site/hero.json';
import workExperience from '../content/site/work-experience.json';
import education from '../content/site/education.json';

// Load and sort content collections
const games = await getCollection('games');
const achievements = await getCollection('achievements');

const sortedGames = sortByDateDesc(games);
const sortedAchievements = sortByDateDesc(achievements);
---

<Layout title="Bartłomiej Gordon — Unity Developer">
  <!-- Hero Section -->
  <Hero heroData={heroData} client:load />
  
  <!-- Job Timeline Section -->
  <JobTimeline 
    workExperience={workExperience} 
    education={education} 
    client:visible 
  />
  
  <!-- Projects Section -->
  <section id="projects" class="section">
    <div class="container">
      <header class="section-header">
        <h2 class="section-title">Projects</h2>
      </header>
      
      <div class="games-grid">
        {sortedGames.map((game) => (
          <GameCard game={game} client:visible />
        ))}
      </div>
    </div>
  </section>
  
  <!-- Achievements Section -->
  <section id="achievements" class="section section--alt">
    <div class="container">
      <header class="section-header">
        <h2 class="section-title">Achievements</h2>
      </header>
      
      <div class="achievements-grid">
        {sortedAchievements.map((achievement) => (
          <AchievementCard achievement={achievement} client:visible />
        ))}
      </div>
    </div>
  </section>
</Layout>

<style>
  .section {
    padding: var(--section-padding) 0;
  }
  
  .section--alt {
    background: var(--color-bg-secondary);
  }
  
  .container {
    max-width: var(--container-max-width);
    margin: 0 auto;
    padding: 0 var(--container-padding);
  }
  
  .section-header {
    margin-bottom: var(--space-11);
  }
  
  .section-title {
    font-family: var(--font-display);
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    letter-spacing: var(--letter-spacing-tight);
  }
  
  .games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: var(--space-8);
  }
  
  .achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: var(--space-7);
  }
  
  @media (max-width: 768px) {
    .games-grid,
    .achievements-grid {
      grid-template-columns: 1fr;
    }
    
    .section {
      padding: var(--section-padding-mobile) 0;
    }
  }
</style>
